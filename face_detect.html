<html>
	<head>
        <!--
		<script type="module" crossorigin src="https://cdn.jsdelivr.net/npm/@gradio/lite/dist/lite.js"></script>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gradio/lite/dist/lite.css" />
        -->

        <style>
            body, html {
                margin: 0;
                padding: 0;
                display: flex;
                justify-content: center;
                align-items: center;
                min-height: 100vh;
            }
    
            gradio-lite {
                display: flex;
                align-items: center;
                width: 100vw;
                height: 100vh;
                justify-content: center;
                align-items: center;
                background-color: #769d9d !important;
            }

            .loading{
                font-size: 2rem;
                font-weight: bold;
                color: azure;
                position: absolute;
                top: 70%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 2;
            }

            .svelte-zyxd38.margin svg {
                width: 800px !important; 
                height: 800px !important; 
            }
        </style>

		<script type="module" crossorigin src="https://gradio-lite-previews.s3.amazonaws.com/30d13ac8a932d53abfd236d3e4e845570480e701/dist/lite.js">
        </script>
		<link rel="stylesheet" href="https://gradio-lite-previews.s3.amazonaws.com/30d13ac8a932d53abfd236d3e4e845570480e701/dist/lite.css" />
        
    </head>
	<body>
		<gradio-lite>
<gradio-requirements></gradio-requirements>

<gradio-file name="app.py" entrypoint>

import json
import io

import gradio as gr
import requests
from PIL import Image

def greet(image):
    with io.BytesIO() as f:
        image.save(f, format='png')
        f.seek(0)
        files = {'img': f}
        ret = requests.post('http://localhost:3000/inference', files=files)
    if ret.ok:
        ret1 = json.loads(ret.text)[0]
        print(ret1)
        output = ret1['output']
        return {'你是電腦': output[0], '你不是電腦': 1 - output[0]}
    else:
        return ret.text()

demo = gr.Interface(
    fn=greet,
    inputs=[gr.Image(type='pil')],
    outputs=[gr.Label()],
    title="AI Image Detector",
    description="Upload an image to check if it's AI-generated or not."
)

demo.launch(share=False)

    </gradio-file>

</gradio-lite>
<script>
        window.addEventListener('load', () => {
            setTimeout(() => {
                const loadingElement = document.querySelector('p.loading, .loading');
                if (loadingElement) {
                    loadingElement.textContent = '正在載入AI人臉識別系統...';
                } 
            }, 500);
        });
</script>
	</body>
</html>

